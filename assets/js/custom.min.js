// // SLIDER
function mainSlider1Init() {
    var interleaveOffset = 0.5;
    var swiperOptions = {
        loop: true,
        speed: 1000,
        parallax: true,
        // autoplay: {
        //     delay: 3500,
        //     disableOnInteraction: false,
        // },
        autoplay: false,
        grabCursor: false,
        pagination: {
            el: '.swiper-pagination',
            clickable: true
            // type: "fraction",
        },
        navigation: {
            nextEl: '.swiper-button-next',
            prevEl: '.swiper-button-prev'
        }
        // on: {
        //     progress: function () {
        //         var swiper = this;
        //         for (var i = 0; i < swiper.slides.length; i++) {
        //             var slideProgress = swiper.slides[i].progress;
        //             var innerOffset = swiper.width * interleaveOffset;
        //             var innerTranslate = slideProgress * innerOffset;
        //             swiper.slides[i].querySelector('.slide-inner').style.transform = 'translate3d(' + innerTranslate + 'px, 0, 0)';
        //         }
        //     },
        //     touchStart: function () {
        //         var swiper = this;
        //         for (var i = 0; i < swiper.slides.length; i++) {
        //             swiper.slides[i].style.transition = '';
        //         }
        //     },
        //     setTransition: function (speed) {
        //         var swiper = this;
        //         for (var i = 0; i < swiper.slides.length; i++) {
        //             swiper.slides[i].style.transition = speed + 'ms';
        //             swiper.slides[i].querySelector('.slide-inner').style.transition = speed + 'ms';
        //         }
        //     }
        // }
    };

    var homeSlider = new Swiper('.homeSlider', swiperOptions);

    var pageSection = $('.bg-image');
    pageSection.each(function (indx) {
        if ($(this).attr('data-background')) {
            $(this).css('background-image', 'url(' + $(this).data('background') + ')');
        }
    });
}

mainSlider1Init();

// $('a[href="#search"]').on('click', function (event) {
//     event.preventDefault();
//     $('#search').addClass('open');
//     $('#search > form > input[type="search"]').focus();
// });
//
// $('#search, #search button.close').on('click keyup', function (event) {
//     if (event.target == this || event.target.className == 'close' || event.keyCode == 27) {
//         $(this).removeClass('open');
//     }
// });

//gsap loader
const tl = gsap.timeline({duration: 0.1});

function preLoader(tl) {
    tl.to(".preLoader.black > img", {
        delay: 1,
        y: 50,
        autoAlpha: 0,
    })
    .to(".preLoader.black", {
        yPercent: -100,
    })
    .to(".preLoader.white", {
        xPercent: -100,
    })
    .to(".preLoader", {
        css: {
            display: "none",
        },
    })
    .from('.imgSet', {
        x: 100,
        autoAlpha: 0
    })
    .from(
        '.scroll',
        {
            autoAlpha: 0,
            y: -100,
            stagger: 0.05
        },
        '>-0.5'
    )

    // .from('.navbar-brand > img', {
    //     x: -50,
    //     autoAlpha: 0
    // })
    //
    // .from(
    //     '.navbar-nav > li, .form-inline ul',
    //     {
    //         autoAlpha: 0,
    //         x: 100,
    //         stagger: 0.05
    //     },
    //     '>-0.5'
    // )

    .from('.slideOne', {
        autoAlpha: 0,
        yPercent: 100,
        stagger: 0.05
    });
    // .from(
    //  '.bg-image',
    //  {
    //      autoAlpha: 0
    //  },
    //  '<-0.25'
    // )
}

let video = document.querySelector('.preLoader video')
window.addEventListener("load", function () {
    if (video) {
        video.addEventListener('ended', function () {
            let str = window.location.href;
            str = str.split('/');
            if (str.at(-1) === 'index.php' || str.at(-1) === '') {
                preLoader(tl);
            } else {
            }
        })
    } else {
        playVideo()
    }
});

// function initialization
$(window).on('load', function () {
    menuShow();
});

var shopSlider = new Swiper('.shopSlider', {
    loop: true,
    autoplay: true,
    slidesPerView: 4,
    spaceBetween: 20,
    // centeredSlides: true,
    // roundLengths: true,
    // If we need pagination

    breakpoints: {
        1024: {
            slidesPerView: 4,
            spaceBetween: 20
        },
        768: {
            slidesPerView: 3,
            spaceBetween: 20
        },
        640: {
            slidesPerView: 2,
            spaceBetween: 10
        },
        576: {
            slidesPerView: 1,
            spaceBetween: 10
        },
        375: {
            slidesPerView: 1,
            spaceBetween: 10
        }
    },

    // Navigation arrows
    navigation: {
        nextEl: '.swiper-button-next',
        prevEl: '.swiper-button-prev'
    },
    pagination: {
        el: '.swiper-pagination'
        // type: 'fraction'
    },

    // And if we need scrollbar
    scrollbar: {
        el: '.swiper-scrollbar'
    }
});

var blogSlider = new Swiper('.blogSlider', {
    loop: true,
    autoplay: true,
    slidesPerView: 1,
    spaceBetween: 20,
    // If we need pagination

    breakpoints: {
        1024: {
            slidesPerView: 1,
            spaceBetween: 20
        },
        768: {
            slidesPerView: 1,
            spaceBetween: 20
        },
        640: {
            slidesPerView: 1,
            spaceBetween: 10
        },
        576: {
            slidesPerView: 1,
            spaceBetween: 10
        },
        375: {
            slidesPerView: 1,
            spaceBetween: 10
        }
    },

    // Navigation arrows
    navigation: {
        nextEl: '.swiper-button-next',
        prevEl: '.swiper-button-prev'
    },

    // And if we need scrollbar
    scrollbar: {
        el: '.swiper-scrollbar'
    }
});

var logoSlider = new Swiper('.logoSlider', {
    loop: true,
    slidesPerView: 5,
    spaceBetween: 20,
    // If we need pagination

    breakpoints: {
        1024: {
            slidesPerView: 5,
            spaceBetween: 20
        },
        768: {
            slidesPerView: 1,
            spaceBetween: 20
        },
        640: {
            slidesPerView: 1,
            spaceBetween: 10
        },
        576: {
            slidesPerView: 1,
            spaceBetween: 10
        },
        375: {
            slidesPerView: 1,
            spaceBetween: 10
        }
    },

    // Navigation arrows
    navigation: {
        nextEl: '.swiper-button-next2',
        prevEl: '.swiper-button-prev2'
    },

    // And if we need scrollbar
    scrollbar: {
        el: '.swiper-scrollbar'
    }
});

var logoSlider = new Swiper('.popularSlider', {
    loop: true,
    slidesPerView: 1,
    autoplay: {
        delay: 2000
    },
    // If we need pagination

    breakpoints: {
        1024: {
            slidesPerView: 3,
            spaceBetween: 20
        },
        768: {
            slidesPerView: 2,
            spaceBetween: 20
        },
    },

    // Navigation arrows
    navigation: {
        nextEl: '.swiper-button-next2',
        prevEl: '.swiper-button-prev2'
    },

    // And if we need scrollbar
    scrollbar: {
        el: '.swiper-scrollbar'
    }
});

function imgRevealer() {
    let revealContainers = document.querySelectorAll('.reveal');

    revealContainers.forEach((container) => {
        let image = container.querySelector('img');
        let revelerTl = gsap.timeline({
            scrollTrigger: {
                // scroller: '[data-scroll-container]',
                trigger: container,
                toggleActions: 'restart none none reverse'
            }
        });

        revelerTl.set(container, {autoAlpha: 1});
        revelerTl.from(container, 0.75, {
            xPercent: -100,
            ease: Power2.out
        });
        revelerTl.from(image, 0.75, {
            xPercent: 100,
            scale: 1.3,
            delay: -0.75,
            ease: Power2.out
        });
    });
}

imgRevealer();

function mousecursor() {
    if ($('body')) {
        const e = document.querySelector('.cursor-inner'),
            t = document.querySelector('.cursor-outer');
        let n,
            i = 0,
            o = !1;
        (window.onmousemove = function (s) {
            o || (t.style.transform = 'translate(' + s.clientX + 'px, ' + s.clientY + 'px)'), (e.style.transform = 'translate(' + s.clientX + 'px, ' + s.clientY + 'px)'), (n = s.clientY), (i = s.clientX);
        }),
            $('body').on('mouseenter', 'a, img, .cursor-pointer', function () {
                e.classList.add('cursor-hover'), t.classList.add('cursor-hover');
            }),
            $('body').on('mouseleave', 'a, img, .cursor-pointer', function () {
                ($(this).is('a, img') && $(this).closest('.cursor-pointer').length) || (e.classList.remove('cursor-hover'), t.classList.remove('cursor-hover'));
            }),
            (e.style.visibility = 'visible'),
            (t.style.visibility = 'visible');
    }
}

$(function () {
    mousecursor();
    // $(".product-detail-slider").slick({
    //     slidesToShow: 1,
    //     slidesToScroll: 1,
    //     arrows: false,
    //     fade: true,
    //     asNavFor: ".product-detail-nav",
    // });
    // $(".product-detail-nav").slick({
    //     slidesToShow: 3,
    //     slidesToScroll: 1,
    //     asNavFor: ".product-detail-slider",
    //     dots: false,
    //     prevArrow:
    //         "<button type='button' class='slick-prev pull-left'><i class='fa fa-angle-left' aria-hidden='true'></i></button>",
    //     nextArrow:
    //         "<button type='button' class='slick-next pull-right'><i class='fa fa-angle-right' aria-hidden='true'></i></button>",
    // });
});

const heading = document.querySelectorAll('.secHeading *');

heading.forEach((text) => {
    const headingTl = gsap.timeline({
        scrollTrigger: {
            // scroller: '[data-scroll-container]',
            trigger: text,
            toggleActions: 'play none none reset'
        }
    });
    headingTl.from(text, 1, {
        y: 120,
        autoAlpha: 0,
        ease: 'power4.out'
    });
});

AOS.init({
    duration: 1200
});

if ($(window).innerWidth() <= 992) {
    var dicon = $('.navbar .drop-down i')
    dicon.on("click", function () {
        $('.navbar .drop-down ul').toggleClass('active');
    })
}
// $(document).ready(function () {
//     // executes when HTML-Document is loaded and DOM is ready
//
//     // breakpoint and up
//     $(window).resize(function () {
//         if ($(window).width() >= 980) {
//             // when you hover a toggle show its dropdown menu
//             $(".navbar .dropdown-toggle").hover(function () {
//                 $(this).parent().toggleClass("show");
//                 $(this).parent().find(".dropdown-menu").toggleClass("show");
//             });
//
//             // hide the menu when the mouse leaves the dropdown
//             $(".navbar .dropdown-menu").mouseleave(function () {
//                 $(this).removeClass("show");
//             });
//
//             // do something here
//         }
//     });
//
//     // document ready
// });


function menuShow() {
    let dropdownToggle = document.querySelectorAll('.dropdown-toggle')
    // console.clear()
    let menuItems = document.querySelectorAll('.mainCat .nav-item .nav-link')
    let shopMenuItems = document.querySelectorAll('.categoriesCont ul li a')

    $(dropdownToggle).mouseenter(function () {
        $('.subCat:first-of-type').addClass('active');
        $('.mainCat .nav-item:first-of-type .nav-link').addClass('active');
    })

    menuItems.forEach((btn) => {
        $(btn).mouseenter(function () {
            console.log('#' + $(this).data('id'))
            $(menuItems).removeClass('active')
            $(this).addClass('active');
            $('.subCat').removeClass('active');
            $('#' + $(this).data('id')).addClass('active');
        });
        $(btn).mouseleave(function () {
            // $('#' + $(this).data('id')).removeClass('active');
        });
    })
    shopMenuItems.forEach((item) => {
        $(item).mouseenter(function () {
            $(shopMenuItems).removeClass('active')
            $(this).addClass('active');
            $('#' + $(this).data('id')).addClass('active');
        });
        $(item).mouseleave(function () {
            $('#' + $(this).data('id')).removeClass('active');
        });
    })
}

var swiper = new Swiper(".product-detail-nav", {
    spaceBetween: 10,
    slidesPerView: 4,
    freeMode: true,
    watchSlidesProgress: true,
    loop: true,
});
var swiper2 = new Swiper(".product-detail-slider", {
    spaceBetween: 10,
    loop: true,
    navigation: {
        nextEl: ".swiper-button-next",
        prevEl: ".swiper-button-prev",
    },
    thumbs: {
        swiper: swiper,
    },
});

// $('.zoom').extm({
//     position:'overlay'
// });

$('.zoom').magnify();